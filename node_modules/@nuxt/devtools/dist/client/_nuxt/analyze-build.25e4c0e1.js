import{g as j,l as I,r as V,o,c as a,a as e,F as m,m as E,n as F,q as n,t as _,s as y,v as P,b as s,w as i,d as p,x as T,y as A,z as R,A as U,j as G,B as X,C as ee,D as te,E as ne,G as oe,H as C,h as w,I as S,e as le,J as ie,K as se}from"./entry.11fe2cd7.js";import{_ as ae}from"./FilepathItem.vue.b4bdb03f.js";import{_ as re}from"./NPanelGrids.16564aae.js";import{_ as ue}from"./PanelLeftRight.vue.17bcbe2c.js";import{_ as de}from"./NTip.vue.0823a0e1.js";import{_ as ce}from"./NCodeBlock.vue.5e6a2196.js";import{_ as me}from"./NCheckbox.vue.09c2faa0.js";import{_ as _e}from"./HelpFab.vue.a9df2aac.js";import"./client.853ad100.js";import"./NIconButton.vue.b41ef4b9.js";const pe={"h-full":"",grid:"~ rows-[max-content_1fr]"},fe={flex:"~ wrap","w-full":""},ve=["onClick"],he=e("div",{border:"b base","flex-auto":""},null,-1),ye={key:0,flex:"~ col gap-4 items-center justify-center",p4:""},xe=e("div",{"flex-auto":""},null,-1),$e={grid:"~ cols-[30px_1fr] gap-x-2 gap-y-3 items-center justify-center","w-100":""},be=e("div",{"i-carbon-commit":"","text-xl":""},null,-1),ge=e("div",{"text-sm":"",op50:""}," Name ",-1),we=e("div",{"i-carbon-time":"","text-xl":""},null,-1),ze=e("div",{"text-sm":"",op50:""}," Build duration ",-1),Be=e("div",{"i-carbon-cics-program":"","text-xl":""},null,-1),ke=e("div",{"text-sm":"",op50:""}," Client bundle size ",-1),Ce=e("div",{"i-carbon-bare-metal-server":"","text-xl":""},null,-1),Ne=e("div",{"text-sm":"",op50:""}," Nitro bundle size ",-1),Te=e("div",{"i-carbon-edge-node":"","text-xl":""},null,-1),Ae=e("div",{"text-sm":"",op50:""}," Built ",-1),De=e("div",{"i-carbon:folder-parent":"","text-xl":""},null,-1),Ie=e("div",{"text-sm":"",op50:""}," Report Path ",-1),Ve=e("div",{"flex-auto":""},null,-1),D="/__nuxt_devtools__/analyze/",Fe=j({__name:"BuildAnalyzeDetails",props:{current:{},prev:{}},setup(N){const f=N,v=I(()=>{const t=[{name:"Overview",id:"overview"}];return f.current.features.bundleClient&&t.push({name:"Client Bundle",id:"bundle-client"}),f.current.features.bundleNitro&&t.push({name:"Nitro Bundle",id:"bundle-nitro"}),f.current.features.viteInspect&&t.push({name:"Vite Inspect",id:"vite-inspect"}),t}),l=V(v.value[0]);function b(t){return t<1024?`${t}B`:t<1024*1024?`${(t/1024).toFixed(1)}KB`:t<1024*1024*1024?`${(t/1024/1024).toFixed(1)}MB`:`${(t/1024/1024/1024).toFixed(1)}GB`}function g(t){return`${((t.endTime-t.startTime)/1e3).toFixed(1)}s`}async function x(t){return R.clearAnalyzeBuilds(await U(),[t])}return(t,c)=>{const z=ae,B=G;return o(),a("div",pe,[e("div",fe,[(o(!0),a(m,null,E(n(v),(h,u)=>(o(),a("button",{key:u,px4:"",py2:"",border:"r base",hover:"bg-active",class:F(h.id===n(l).id?"":"border-b"),onClick:d=>l.value=h},[e("div",{class:F(h.id===n(l).id?"":"op30")},_(h.name),3)],10,ve))),128)),he]),n(l).id==="overview"?(o(),a("div",ye,[xe,e("div",$e,[be,e("div",null,[ge,e("div",null,_(t.current.name),1)]),we,e("div",null,[ze,e("div",null,_(g(t.current)),1)]),t.current.size?.clientBundle?(o(),a(m,{key:0},[Be,e("div",null,[ke,e("div",null,_(b(t.current.size.clientBundle)),1)])],64)):y("",!0),t.current.size.nitroBundle?(o(),a(m,{key:1},[Ce,e("div",null,[Ne,e("div",null,_(b(t.current.size.nitroBundle)),1)])],64)):y("",!0),Te,e("div",null,[Ae,e("div",null,_(n(P)(new Date(t.current.endTime))),1)]),De,e("div",null,[Ie,s(z,{filepath:t.current.analyzeDir},null,8,["filepath"])])]),Ve,s(B,{n:"rose",icon:"carbon-delete",onClick:c[0]||(c[0]=h=>x(t.current.name))},{default:i(()=>[p(" Delete this report ")]),_:1})])):y("",!0),c._lazyshow1||n(l).id==="bundle-client"?(c._lazyshow1=!0,o(),a(m,null,[T(e("iframe",{src:`${D}${t.current.slug}/client.html`,"h-full":"","w-full":""},null,8,["src"]),[[A,n(l).id==="bundle-client"]])],64)):y("v-show-if",!0),c._lazyshow2||n(l).id==="bundle-nitro"?(c._lazyshow2=!0,o(),a(m,null,[T(e("iframe",{src:`${D}${t.current.slug}/nitro.html`,"h-full":"","w-full":""},null,8,["src"]),[[A,n(l).id==="bundle-nitro"]])],64)):y("v-show-if",!0),c._lazyshow3||n(l).id==="vite-inspect"?(c._lazyshow3=!0,o(),a(m,null,[T(e("iframe",{src:`${D}${t.current.slug}/.vite-inspect/`,"h-full":"","w-full":""},null,8,["src"]),[[A,n(l).id==="vite-inspect"]])],64)):y("v-show-if",!0)])}}}),Re={class:"markdown-body"},Se=e("h1",null,"Build Analyze",-1),je=e("p",null,[p("DevTools provides a build analyze tool to help you understand the size of your app in production. Whenever you start a new build, it runs the command "),e("code",null,"nuxt build --analyze"),p(" and present the output data directly in DevTools for easy browsing and comparing.")],-1),Ee=[Se,je],Pe={__name:"analyze-build",setup(N,{expose:f}){return f({frontmatter:{}}),(l,b)=>(o(),a("div",Re,Ee))}},Ue={flex:"~ col"},Ge={flex:"~ gap-1 items-center wrap","text-sm":"",op60:""},Le=e("div",{"i-carbon-time":""},null,-1),qe=e("div",{"flex-auto":""},null,-1),He=e("div",{"x-divider":""},null,-1),Ke={flex:"~ items-center justify-center wrap",p4:""},Oe={flex:"~ col gap-1","w-250":"",p4:""},Je=e("h3",{class:"text-lg font-medium leading-6",mb2:""}," Start analyze build? ",-1),Me=e("p",{op50:""}," Enter the name of the build: ",-1),We=e("div",{my3:"","x-divider":""},null,-1),Ye=e("p",{op50:""}," The following command will be executed in your terminal: ",-1),Ze={flex:"~ gap-3",mt2:"","justify-end":""},rt=j({__name:"analyze-build",setup(N){const f=X(),v=ee(),l=te(),b=ne(),g=I(()=>{const u=b.query.slug;return v.value?.builds.find(d=>d.slug===u)??v.value?.builds[0]}),x=V(!1),t=V(""),c=I(()=>v.value?.builds.some(u=>u.name===t.value.trim()));async function z(){t.value=await R.generateAnalyzeBuildName(),await f.start()&&(C.value={name:t.value,processId:await R.startAnalyzeBuild(await U(),t.value)},x.value&&B())}function B(){C.value?.processId&&l.push(`/modules/terminals?id=${encodeURIComponent(C.value.processId)}`)}function h(u){return`${((u.endTime-u.startTime)/1e3).toFixed(1)}s`}return oe(()=>[{id:"action:analyze-build: start",title:"Start a new analyze build",icon:"i-carbon-edge-node",action:z}]),(u,d)=>{const L=le,k=G,q=Fe,H=re,K=ue,O=ie,J=de,M=ce,W=me,Y=se,Z=Pe,Q=_e;return o(),a(m,null,[s(K,{"left-size":30},{left:i(()=>[e("div",Ue,[(o(!0),a(m,null,E(n(v)?.builds,r=>(o(),a(m,{key:r.slug},[s(L,{flex:"~ col gap1","hover:bg-active":"",p3:"",class:F(r.slug===n(g)?.slug?"text-primary bg-active":""),to:`?slug=${encodeURIComponent(r.slug)}`},{default:i(()=>[e("code",null,_(r.name),1),e("div",Ge,[Le,e("span",null,_(h(r)),1),qe,e("span",null,_(n(P)(new Date(r.endTime))),1)])]),_:2},1032,["class","to"]),He],64))),128)),e("div",Ke,[("processAnalyzeBuildInfo"in u?u.processAnalyzeBuildInfo:n(C))?(o(),w(k,{key:1,n:"primary",icon:"carbon-circle-dash animate-spin",onClick:d[1]||(d[1]=r=>B())},{default:i(()=>[p(" Building... ")]),_:1})):(o(),w(k,{key:0,n:"primary",icon:"carbon-edge-node",onClick:d[0]||(d[0]=r=>z())},{default:i(()=>[p(" Start a new build ")]),_:1}))])])]),right:i(()=>[n(g)?(o(),w(q,{key:0,current:n(g)},null,8,["current"])):(o(),w(H,{key:1}))]),_:1}),s(n(f),null,{default:i(({resolve:r})=>[s(Y,{"model-value":!0,onClose:$=>r(!1)},{default:i(()=>[e("div",Oe,[Je,Me,s(O,{modelValue:n(t),"onUpdate:modelValue":d[2]||(d[2]=$=>S(t)?t.value=$:null),placeholder:"Build name"},null,8,["modelValue"]),n(c)?(o(),w(J,{key:0,"n-orange":""},{default:i(()=>[p(" A build with the same name already exists, continue would overrides the previous build result. ")]),_:1})):y("",!0),We,Ye,s(M,{code:`npx nuxi analyze --no-serve --name=${n(t)}`,lang:"bash",px4:"",py2:"",border:"~ base rounded",lines:!1},null,8,["code"]),s(W,{modelValue:n(x),"onUpdate:modelValue":d[3]||(d[3]=$=>S(x)?x.value=$:null),mt2:"",n:"primary"},{default:i(()=>[p(" Navigate to terminal ")]),_:1},8,["modelValue"]),e("div",Ze,[s(k,{onClick:$=>r(!1)},{default:i(()=>[p(" Cancel ")]),_:2},1032,["onClick"]),s(k,{n:"solid primary",onClick:$=>r(!0)},{default:i(()=>[p(" Start ")]),_:2},1032,["onClick"])])])]),_:2},1032,["onClose"])]),_:1}),s(Q,null,{default:i(()=>[s(Z)]),_:1})],64)}}});export{rt as default};
